<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8" />
    <title>Bot Enhanced - Teste Account/Contact autom√°ticos</title>

    <style type="text/css">
        body {
            font-family: "Salesforce Sans", Arial, sans-serif;
            margin: 20px;
        }

        h2 {
            color: #EB640A;
        }

        .status {
            margin-top: 12px;
            font-size: 0.9rem;
            color: #555;
        }

        /* Launcher igual ao Standard */
        .embeddedServiceHelpButton .helpButton .uiButton {
            background-color: #EB640A;
            font-family: "Salesforce Sans", sans-serif;
        }
        .embeddedServiceHelpButton .helpButton .uiButton:focus {
            outline: 1px solid #EB640A;
        }

        @font-face {
            font-family: "Salesforce Sans";
            src: url("https://c1.sfdcstatic.com/etc/clientlibs/sfdc-aem-master/clientlibs_base/fonts/SalesforceSans-Regular.woff") format("woff"),
                 url("https://c1.sfdcstatic.com/etc/clientlibs/sfdc-aem-master/clientlibs_base/fonts/SalesforceSans-Regular.ttf") format("truetype");
        }
    </style>
</head>
<body>
    <h2>Teste do Bras Enhanced (AccountId / ContactId autom√°ticos)</h2>

    <p>
        Esta p√°gina envia os valores fixos de <code>AccountId</code> e <code>ContactId</code>
        para o Salesforce <strong>antes</strong> de abrir o chat.
        <br>
        Basta clicar no bot√£o flutuante do chat no canto da p√°gina. üëá
    </p>

    <div class="status" id="statusMessage">
        Carregando script do Salesforce...
    </div>

    <script type="text/javascript">
        // Disparado quando o SDK do Embedded Messaging est√° pronto
        window.addEventListener("onEmbeddedMessagingReady", () => {
            document.getElementById("statusMessage").textContent =
                "Embedded Messaging carregado. Clique no bot√£o do chat.";

            // Valores FIXOS para teste ‚Äî ajuste conforme desejar
            const hiddenFields = {
                AccountId: "0018900000WyW8PAAV",
                ContactId: "0038900000OCz1uAAD"
            };

            try {
                embeddedservice_bootstrap.prechatAPI.setHiddenPrechatFields(hiddenFields);
                console.log("%c Hidden Pre-Chat Fields enviados:", "color:green;font-weight:bold", hiddenFields);
            } catch (e) {
                console.error("Erro ao setar Hidden Pre-Chat Fields:", e);
                document.getElementById("statusMessage").textContent =
                    "Erro ao definir os valores. Veja o console.";
            }
        });

        function initEmbeddedMessaging() {
            try {
                embeddedservice_bootstrap.settings.language = "pt_BR";

                embeddedservice_bootstrap.init(
                    "00D890000032JqX", // Org Id - Sandbox
                    "Bras_CanaisDigitaisEnhanced", // DevName do Deployment
                    "https://supergasbras--tecnica25.sandbox.my.site.com/ESWBrasCanaisDigitais1764590606132",
                    {
                        scrt2URL: "https://supergasbras--tecnica25.sandbox.my.salesforce-scrt.com"
                    }
                );
            } catch (err) {
                console.error("Erro ao carregar Embedded Messaging:", err);
                document.getElementById("statusMessage").textContent =
                    "Erro no boot do Messaging. Veja o console.";
            }
        }
    </script>

    <script
        type="text/javascript"
        src="https://supergasbras--tecnica25.sandbox.my.site.com/ESWBrasCanaisDigitais1764590606132/assets/js/bootstrap.min.js"
        onload="initEmbeddedMessaging()">
    </script>
</body>
</html>
